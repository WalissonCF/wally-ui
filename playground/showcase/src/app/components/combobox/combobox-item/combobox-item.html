<div
  (click)="handleClick($event)"
  class="p-1"
  role="option"
  [attr.aria-selected]="selected()"
  [attr.aria-disabled]="item().disabled"
>
  <div
    class="flex items-center gap-3 py-2 px-4 rounded-lg transition-all duration-150"
    [ngClass]="{
      'bg-neutral-100 dark:bg-neutral-800': focused() && !selected(),
      'bg-blue-50 dark:bg-blue-900/20': selected(),
      'hover:bg-neutral-100 dark:hover:bg-neutral-700/50 cursor-pointer': !item().disabled && !selected(),
      'text-neutral-400 dark:text-neutral-600 pointer-events-none': item().disabled
    }"
  >
    <!-- Checkbox (multi-select only) -->
    @if (comboboxService.multiSelect()) {
      <div class="flex-shrink-0">
        <div
          class="w-4 h-4 border-2 rounded transition-all"
          [ngClass]="{
            'border-blue-500 bg-blue-500': selected(),
            'border-neutral-300 dark:border-neutral-600': !selected()
          }"
        >
          @if (selected()) {
            <svg class="w-full h-full text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
            </svg>
          }
        </div>
      </div>
    }

    <!-- Item content -->
    <div class="flex-1 min-w-0">
      <div class="text-sm font-medium text-[#0a0a0a] dark:text-white">
        {{ item().label }}
      </div>

      @if (item().description) {
        <div class="text-xs text-neutral-600 dark:text-neutral-400 mt-0.5">
          {{ item().description }}
        </div>
      }
    </div>

    <!-- Selected indicator (single-select only) -->
    @if (!comboboxService.multiSelect() && selected()) {
      <div class="flex-shrink-0">
        <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
        </svg>
      </div>
    }
  </div>
</div>
